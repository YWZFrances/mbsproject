function init(){var o=localStorage.getItem(Static.good);if(console.log(o),o){o=JSON.parse(o);for(var i=[],t=0;t<o.length;t++)i.push(getGood(o[t]));render(i)}else alert("此购物车没有任何东西")}function render(o){var i={title:"购物车",list:o},t=template("goodtpl",i);document.getElementById("content").innerHTML=t,console.log(t),$(".del").click(function(){var o=$(this);removeGood($(this).data("id"),function(i){i?(o.parents(".carlist").remove(),$(".icon-xuankuang").addClass("color"),init1()):alert("删除失败，请重试")})})}function removeGood(o,i){var t=localStorage.getItem(Static.good);t=JSON.parse(t)||[];for(var n=0;n<t.length;n++)if(t[n]==o)return t.splice(n,1),localStorage.setItem(Static.good,JSON.stringify(t)),void i(!0);i(!1)}function getGood(o){for(var i=0;i<goods.length;i++)if(goods[i].good_id==o)return goods[i]}function init1(){var o=localStorage.getItem(Static.good);o=JSON.parse(o)||[];for(var i=0,t=0;t<o.length;t++)$("button span").html(o.length),i+=getPrice(o[t]);$("#total span").html("￥"+i)}function getPrice(o){for(var i=0;i<goods.length;i++)if(goods[i].good_id==o)return goods[i].good_price}$("footer li a").click(function(){console.log(this),$(this).addClass("color").parents().siblings().find("a").removeClass("color")});var id=0,goods=[{good_id:id++,good_url:"dist/img/01.png",good_name:"韩伊儿欧韩街拍必备超宽领子拼仿皮草毛条短款棉衣(430515403)",good_price:299},{good_id:id++,good_url:"dist/img/02.png",good_name:"柏橡2016韩伊儿欧韩街拍必备超宽领子拼仿皮草毛条短款棉衣",good_price:259},{good_id:id++,good_url:"dist/img/03.png",good_name:"柏橡2016moshine韩伊儿欧韩街拍必备超宽领子拼仿皮草毛条短款棉衣",good_price:280},{good_id:id++,good_url:"dist/img/04.png",good_name:"柏橡2016moshine韩伊儿欧韩街拍必备超宽领子拼仿皮草毛条短款棉衣",good_price:280},{good_id:id++,good_url:"dist/img/05.png",good_name:"柏橡2016moshine韩伊儿欧韩街拍必备超宽领子拼仿皮草毛条短款棉衣",good_price:280},{good_id:id++,good_url:"dist/img/06.png",good_name:"柏橡2016moshine韩伊儿欧韩街拍必备超宽领子拼仿皮草毛条短款棉衣",good_price:280}],Static={good:"goodlist"};init(),$(".icon-xuankuang").click(function(){$(".icon-xuankuang").is(".color")?($(".icon-xuankuang").removeClass("color"),$("button span").html(""),$("#total span").html("")):($(".icon-xuankuang").addClass("color"),init1())});